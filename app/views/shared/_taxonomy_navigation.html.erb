<% if taxonomy_navigation.values().flatten.any? %>
  <div class="taxonomy-navigation" data-module="track-click">
    <div class="taxonomy-navigation__row">
      <div class="taxonomy-navigation__column">
        <%= render "govuk_publishing_components/components/heading",
                   text: 'Topics',
                   heading_level: 2,
                   font_size: 19 %>
        <ul>
          <% tagged_taxons.each do |tagged_taxon| %>
            <li class="taxonomy-navigation__list-item">
              <%= link_to tagged_taxon[:taxon_name], tagged_taxon[:taxon_link] %>
            </li>
          <% end %>
        </ul>
      </div>

      <% if related_collections.any? %>
        <div class="taxonomy-navigation__column">
          <%= render "govuk_publishing_components/components/heading",
                     text: 'Collections',
                     heading_level: 2,
                     font_size: 19 %>
          <ul>
            <% related_collections.each do |base_path, title| %>
              <li class="taxonomy-navigation__list-item">
                <%= link_to title, base_path %>
              </li>
            <% end %>
          </ul>
        </div>
      <% end %>
    </div>

    <% if taxonomy_navigation[:services].present? %>
      <div class="taxonomy-navigation__section">
        <%= render "govuk_publishing_components/components/heading", {
          text: t('supergroups.services'),
          heading_level: 3,
          font_size: 24,
          margin_bottom: 2
        } %>

        <%= render "govuk_publishing_components/components/highlight_boxes", {
          inverse: true,
          items: taxonomy_navigation[:services][:promoted_content]
        } %>

        <%= render "govuk_publishing_components/components/document_list", {
          items: taxonomy_navigation[:services][:documents]
        } %>
      </div>
    <% end %>

    <% if taxonomy_navigation[:guidance_and_regulation].present? %>
      <div class="taxonomy-navigation__section">
        <%= render "govuk_publishing_components/components/heading", {
            text: t('supergroups.guidance_and_regulation'),
            heading_level: 3,
            font_size: 24,
            margin_bottom: 2
        } %>

        <%= render "govuk_publishing_components/components/document_list", {
            items: taxonomy_navigation[:guidance_and_regulation]
        } %>
      </div>
    <% end %>

    <% if taxonomy_navigation[:news_and_communications].present? %>
      <div class="taxonomy-navigation__section">
        <%= render "govuk_publishing_components/components/heading", {
          text: t('supergroups.news_and_communications'),
          heading_level: 3,
          font_size: 24,
          margin_bottom: 2
        } %>

        <% taxonomy_navigation[:news_and_communications][:promoted_content].in_groups_of(3, false) do |promo_group| %>
          <div class="grid-row">
          <% promo_group.each do |promo| %>
            <div class="column-one-third">
              <%= render "govuk_publishing_components/components/image_card", {
                context: promo[:image][:context],
                href: promo[:link][:path],
                heading_text: promo[:link][:text],
                image_src: promo[:image][:url],
                image_alt: promo[:image][:alt],
                heading_level: 0,
                href_data_attributes: promo[:link][:data_attributes]
                } %>
            </div>
          <% end %>
          </div>
        <% end %>

        <%= render "govuk_publishing_components/components/document_list", {
          items: taxonomy_navigation[:news_and_communications][:documents]
        } %>
      </div>
    <% end %>

    <% if taxonomy_navigation[:policy_and_engagement].present? %>
      <div class="taxonomy-navigation__section">
        <%= render "govuk_publishing_components/components/heading", {
            text: t('supergroups.policy_and_engagement'),
            heading_level: 3,
            font_size: 24,
            margin_bottom: 2
        } %>

        <%= render "govuk_publishing_components/components/document_list", {
            items: taxonomy_navigation[:policy_and_engagement]
        } %>
      </div>
    <% end %>

    <% if taxonomy_navigation[:transparency].present? %>
      <div class="taxonomy-navigation__section">
        <%= render "govuk_publishing_components/components/heading", {
            text: t('supergroups.transparency'),
            heading_level: 3,
            font_size: 24,
            margin_bottom: 2
        } %>

        <%= render "govuk_publishing_components/components/document_list", {
            items: taxonomy_navigation[:transparency]
        } %>
      </div>
    <% end %>

  </div>
<% end %>
